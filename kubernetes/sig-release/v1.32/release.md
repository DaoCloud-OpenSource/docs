# Kubernetes 1.32

å¤ªå¹³æ´‹æ—¶é—´ 2024 å¹´ 12 æœˆ 11 æ—¥ï¼Œä¸»é¢˜ä¸º {release-name} çš„ Kubernetes v1.32 æ­£å¼å‘å¸ƒã€‚

æ­¤ç‰ˆæœ¬è·ç¦»ä¸Šç‰ˆæœ¬å‘å¸ƒæ—¶éš” 4 ä¸ªæœˆï¼Œæ˜¯ 2024 å¹´çš„ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ã€‚

ä¸ä¹‹å‰çš„ç‰ˆæœ¬ç±»ä¼¼ï¼ŒKubernetes v1.32 ç‰ˆæœ¬å¼•å…¥äº†å¤šé¡¹æ–°çš„ç¨³å®šã€Beta å’Œ Alpha ç‰ˆæœ¬çš„åŠŸèƒ½ã€‚ä¸€è´¯äº¤ä»˜é«˜è´¨é‡ç‰ˆæœ¬çš„æ‰¿è¯ºå‡¸æ˜¾äº† Kubernetes ç¤¾åŒºçš„å¼€å‘å‘¨æœŸå®åŠ›å’Œç¤¾åŒºçš„æ´»è·ƒæ”¯æŒã€‚

æ­¤ç‰ˆæœ¬åŒ…å« 44 é¡¹æ”¹è¿›ã€‚åœ¨è¿™äº›æ”¹è¿›åŠŸèƒ½ä¸­ï¼Œæœ‰ 13 é¡¹å·²æ™‹å‡ä¸ºç¨³å®šç‰ˆï¼Œå¦å¤–æœ‰ 12 é¡¹æ­£åœ¨è¿›å…¥ Beta é˜¶æ®µï¼Œä»¥åŠæœ€åçš„ 19 é¡¹ä¸º Alpha é˜¶æ®µã€‚

## å‘å¸ƒä¸»é¢˜å’Œ Logo

Kubernetes v1.32 çš„å‘å¸ƒä¸»é¢˜æ˜¯ {release-name}ã€‚

![](./kubernetes-1.32.png)

Kubernetes v1.32's {release-story}

## GA å’Œç¨³å®šçš„åŠŸèƒ½

GA å…¨ç§° General Availabilityï¼Œå³æ­£å¼å‘å¸ƒã€‚Kubernetes çš„è¿›é˜¶è·¯çº¿é€šå¸¸æ˜¯ Alphaã€Betaã€Stable (å³ GA)ã€Deprecation/Removal è¿™å››ä¸ªé˜¶æ®µã€‚

- [KEP-3221 ç»“æ„åŒ–é‰´æƒé…ç½®, å¯åŒ…å«å¤šä¸ª webhook çš„é‰´æƒé“¾ã€‚è¯¥é“¾ä¸­çš„é‰´æƒé¡¹å¯ä»¥å…·æœ‰æ˜ç¡®å®šä¹‰çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°å¯ä»¥æŒ‰ç‰¹å®šé¡ºåºéªŒè¯è¯·æ±‚ï¼Œä»è€Œæä¾›ç»†ç²’åº¦çš„æ§åˆ¶](https://kep.k8s.io/3221)
- [KEP-4193 æ”¹è¿›ç»‘å®šçš„æœåŠ¡å¸æˆ·ä»¤ç‰Œ, è‡ªåŠ¨å°† Pod å…³è”çš„èŠ‚ç‚¹çš„ name å’Œ uid ï¼ˆé€šè¿‡ spec.nodeName ï¼‰åµŒå…¥åˆ°ç”Ÿæˆçš„ä»¤ç‰Œä¸­, å¹¶å…è®¸ç”¨æˆ·è·å–ä¸“é—¨ä¸ Node å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„ä»¤ç‰Œ](https://kep.k8s.io/4193)
- [KEP-4358 è‡ªå®šä¹‰èµ„æºå­—æ®µé€‰æ‹©å™¨, å…è®¸ä¸ºè‡ªå®šä¹‰èµ„æºç±»å‹è®¾ç½®é¢„å®šä¹‰çš„å­—æ®µé€‰æ‹©é…ç½®ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ä»¥å‰é¢„è®¾çš„å­—æ®µé€‰æ‹©å™¨æ¥è¿‡æ»¤èµ„æº](https://kep.k8s.io/4358)
- [KEP-4420 å½“ç”Ÿæˆçš„åç§°ä¸ç°æœ‰èµ„æºåç§°å†²çªæ—¶ï¼Œkube-apiserver ä¼šè‡ªåŠ¨é‡è¯•ä½¿ç”¨ generateName çš„åˆ›å»ºè¯·æ±‚ï¼Œæœ€å¤šé‡è¯• 7 æ¬¡](https://kep.k8s.io/4420)
- [KEP-1860 ä¸ºäº‘æä¾›å•†æä¾›äº†ä¸€ç§ç¦ç”¨ kube-proxy é…ç½® LoadBalancer IP è¡Œä¸ºçš„æ–¹æ³•](https://kep.k8s.io/1860)
- [KEP-2681 ä¸º PodÂ æ·»åŠ  `status.hostIPs` å­—æ®µ](https://kep.k8s.io/2681)
- [KEP-4292 åœ¨ kubectl debug å‘½ä»¤ä¸­çš„é¢„å®šä¹‰é…ç½®æ–‡ä»¶ä¹‹ä¸Šæ·»åŠ äº†æ–°çš„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶åŠŸèƒ½, ä½¿kubectl debug pod/node æˆ–ä¸´æ—¶å®¹å™¨è§„èŒƒå¯é…ç½®](https://kep.k8s.io/4292)
- [KEP-4292 å†…å­˜ç®¡ç†å™¨æ˜¯ kubelet ç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œæ—¨åœ¨å‘ QoS ç±»ä¸º Guaranteed çš„ Pod æä¾›å¤š NUMA ä¿è¯çš„å†…å­˜åˆ†é…](https://kep.k8s.io/1769)
- [KEP-1967 æ”¯æŒè°ƒæ•´å†…å­˜å·çš„å¤§å°ä»¥åŒ¹é… Pod å¯åˆ†é…å†…å­˜](https://kep.k8s.io/1967)
- [KEP-3545 ä¼˜åŒ–æ‹“æ‰‘ç®¡ç†å™¨ä¸­çš„å¤š NUMA å¯¹é½ï¼Œåœ¨è®¡ç®—åŒ…å«å¤šä¸ª NUMA èŠ‚ç‚¹çš„â€œæœ€ä½³æç¤ºâ€æ—¶ï¼Œä¼šè€ƒè™‘ NUMA èŠ‚ç‚¹ä¹‹é—´çš„ç›¸å¯¹è·ç¦»](https://kep.k8s.io/3545)
- [KEP-4026 ä¸ºä» CronJob æ´¾ç”Ÿçš„ Job å¯¹è±¡æ·»åŠ æ–°æ³¨è§£ â€œbatch.kubernetes.io/cronjob-scheduled-timestampâ€](https://kep.k8s.io/4026)
- [KEP-4017 ä¸º StatefulSet å’Œ Job åˆ›å»ºçš„ Pod æ–°å¢æ ‡ç­¾ï¼Œç”¨æ¥æ ‡è®°è‡ªèº«ç´¢å¼•](https://kep.k8s.io/4017)
- [KEP-1847 ä¸º StatefulSet æä¾›äº†è‡ªåŠ¨åˆ é™¤ PVC çš„æ–¹æ³•](https://kep.k8s.io/1847)

## è¿›å…¥ Beta é˜¶æ®µçš„åŠŸèƒ½

Beta é˜¶æ®µçš„åŠŸèƒ½æ˜¯æŒ‡é‚£äº›å·²ç»ç»è¿‡ Alpha é˜¶æ®µçš„åŠŸèƒ½, ä¸”åœ¨ Beta é˜¶æ®µä¸­æ·»åŠ äº†æ›´å¤šçš„æµ‹è¯•å’ŒéªŒè¯, é€šå¸¸æƒ…å†µä¸‹æ˜¯é»˜è®¤å¯ç”¨çš„ã€‚

- [KEP-3157 Informer å¯ä»¥è·å–æ•°æ®æµæ¥å¯åŠ¨ç¼“å­˜](https://kep.k8s.io/3157)
- [KEP-4601 é‰´æƒå±æ€§å°†æ‰©å±•ä¸ºåŒ…æ‹¬åˆ—è¡¨ã€ç›‘è§†å’Œåˆ é™¤é›†åˆä¸­çš„å­—æ®µé€‰æ‹©å™¨å’Œæ ‡ç­¾é€‰æ‹©å™¨ã€‚è¿™å°†å…è®¸é‰´æƒè€…åœ¨åšå‡ºé‰´æƒå†³å®šæ—¶ä½¿ç”¨è¿™äº›é€‰æ‹©å™¨](https://kep.k8s.io/4601)
- [KEP-4633 ä»…å…è®¸å¯¹é…ç½®çš„ç«¯ç‚¹è¿›è¡ŒåŒ¿åèº«ä»½éªŒè¯](https://kep.k8s.io/4633)
- [KEP-1790 å…è®¸ç”¨æˆ·é€šè¿‡å‡å°‘è¯·æ±‚çš„å®¹é‡å¤§å°, ä»å·æ‰©å®¹å¤±è´¥ä¸­æ¢å¤](https://kep.k8s.io/1790)
- [KEP-3476 æä¾›äº†ä¸€ç»„æ–°çš„ API, æ”¯æŒä¸€è‡´çš„ç»„å¿«ç…§ï¼Œè¯¥å¿«ç…§å…è®¸åœ¨åŒä¸€æ—¶é—´ç‚¹ä»å¤šä¸ªå·æ‹æ‘„å¿«ç…§ï¼Œä»¥å®ç°å†™å…¥é¡ºåºä¸€è‡´æ€§](https://kep.k8s.io/3476)
- [KEP-1710 é€šè¿‡ä½¿ç”¨æ­£ç¡®çš„ SELinux æ ‡ç­¾æŒ‚è½½å·è€Œä¸æ˜¯é€’å½’æ›´æ”¹å·ä¸Šçš„æ¯ä¸ªæ–‡ä»¶æ¥åŠ é€Ÿå®¹å™¨å¯åŠ¨](https://kep.k8s.io/1710)
- [KEP-4247 è°ƒåº¦å™¨é€šè¿‡å°† QueueingHint å¼•å…¥ EventsToRegisterï¼Œè°ƒåº¦é˜Ÿåˆ—æ ¹æ® QueueingHint çš„ç»“æœå¯¹ Pod é‡æ–°æ’é˜Ÿ, æœ‰åŠ©äºå‡å°‘æ— ç”¨çš„è°ƒåº¦é‡è¯•ï¼Œä»è€Œæé«˜è°ƒåº¦ååé‡](https://kep.k8s.io/4247)
- [KEP-4369 ç¯å¢ƒå˜é‡ä¸­å…è®¸ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦](https://kep.k8s.io/4369)
- [KEP-4381 å€ŸåŠ©ç»“æ„åŒ–å‚æ•°ï¼Œkube-scheduler å’Œ Cluster Autoscaler å¯ä»¥è‡ªè¡Œå¤„ç†å’Œæ¨¡æ‹Ÿå£°æ˜åˆ†é…ï¼Œè€Œæ— éœ€ä¾èµ–ç¬¬ä¸‰æ–¹é©±åŠ¨ç¨‹åº](https://kep.k8s.io/4381)
- [KEP-4368 æ”¯æŒ Job çš„ ManagedBy å­—æ®µ](https://kep.k8s.io/4368)
- [KEP-3331 æ·»åŠ ç»“æ„åŒ–èº«ä»½éªŒè¯é…ç½®](https://kep.k8s.io/3331)

è¿™æ˜¯æœ‰å…³ Beta çš„æ›´æ–°æ€»è§ˆï¼Œä¸‹æ–‡æ‹©å–äº†éƒ¨åˆ†ç‰¹æ€§è¯¦è¿°ã€‚å¦‚æœå¯¹å…¶ä»–ç‰¹æ€§æ„Ÿå…´è¶£ï¼Œè¯·ç§»æ­¥è‡³å…·ä½“çš„ KEP é¡µé¢äº†è§£è¿›å±•å’Œè¯¦æƒ…ã€‚

### KEP-1790 å·æ‰©å®¹å¤±è´¥æ¢å¤

ç”¨æˆ·å¯ä»¥å°† PersistentVolumeClaim (PVC) æ‰©å±•è‡³åº•å±‚å­˜å‚¨æä¾›ç¨‹åºå¯èƒ½ä¸æ”¯æŒçš„å¤§å°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹, é€šå¸¸æ‰©å±•æ§åˆ¶å™¨ä¼šæ°¸è¿œå°è¯•æ‰©å±•å·å¹¶ä¸æ–­å¤±è´¥ã€‚æˆ‘ä»¬å¸Œæœ›è®©ç”¨æˆ·æ›´å®¹æ˜“ä»æ‰©å±•å¤±è´¥ä¸­æ¢å¤ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥ä½¿ç”¨å¯èƒ½æˆåŠŸçš„å€¼é‡è¯•å·æ‰©å±•ã€‚ä¸ºäº†å®ç°æ¢å¤ï¼Œæ­¤å¢å¼ºåŠŸèƒ½æ”¾å®½äº† PVC å¯¹è±¡çš„ API éªŒè¯ï¼Œä»¥å…è®¸å‡å°‘è¯·æ±‚çš„å¤§å°ã€‚

å…è®¸ç”¨æˆ·å‡å°å¤§å°çš„é—®é¢˜æ˜¯, æ¶æ„ç”¨æˆ·å¯ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½æ¥æ»¥ç”¨é…é¢ç³»ç»Ÿã€‚ä»–ä»¬å¯ä»¥é€šè¿‡å¿«é€Ÿè†¨èƒ€ç„¶åæ”¶ç¼© PVC æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒCSI å’Œæ ‘å†…å·æ’ä»¶éƒ½è¢«è®¾è®¡ä¸ºæ°¸è¿œä¸ä¼šå¯¹åº•å±‚å·æ‰§è¡Œå®é™…æ”¶ç¼©ï¼Œä½†å®ƒå¯ä»¥æ¬ºéª—é…é¢ç³»ç»Ÿï¼Œè®©å…¶ç›¸ä¿¡ç”¨æˆ·ä½¿ç”¨çš„å­˜å‚¨ç©ºé—´æ¯”ä»–/å¥¹å®é™…ä½¿ç”¨çš„å­˜å‚¨ç©ºé—´å°‘ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, è™½ç„¶å…è®¸ç”¨æˆ·å‡å°‘ PVC çš„å¤§å°ï¼ˆå‰ææ˜¯è¯·æ±‚çš„å¤§å° > pvc.Status.Capacity ï¼‰ï¼Œä½†é…é¢è®¡ç®—å°†ä½¿ç”¨ max(pvc.Spec.Capacity, pvc.Status.AllocatedResources) å¹¶å‡å°‘ pvc.Status.AllocatedResources ä»…åœ¨å…ˆå‰å‘å¸ƒçš„æ‰©å±•å› æŸç§ç»ˆç«¯æ•…éšœè€Œå¤±è´¥åç”± resize-controller å®Œæˆã€‚

## è¿›å…¥ Alpha é˜¶æ®µçš„åŠŸèƒ½

Alpha é˜¶æ®µçš„åŠŸèƒ½æ˜¯æŒ‡é‚£äº›åˆšåˆšè¢«å¼•å…¥çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½æ˜¯é»˜è®¤å…³é—­çš„ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨å¼€å¯ã€‚

- [KEP-3962 æ·»åŠ äº†ä½¿ç”¨ CEL è¡¨è¾¾å¼å£°æ˜çš„æ›´æ”¹å‡†å…¥ç­–ç•¥ï¼Œä½œä¸ºæ›´æ”¹å‡†å…¥ Webhook çš„æ›¿ä»£æ–¹æ¡ˆ](https://kep.k8s.io/3962)
- [KEP-4427 dnsConfig.searches æ”¯æŒå¯¹ DNS æœç´¢å­—ç¬¦ä¸²è¿›è¡Œå®½æ¾éªŒè¯, å…è®¸åŒ…å« â€œ.â€ å’Œ â€œ_â€ å­—ç¬¦](https://kep.k8s.io/4427)
- [KEP-4832 æé«˜è°ƒåº¦ååé‡, å½“ Pod éœ€è¦é€šè¿‡å¼‚æ­¥ API è°ƒç”¨å‘å‡ºæŠ¢å æ—¶](https://kep.k8s.io/4832)
- [KEP-3288 æ‹†åˆ†å®¹å™¨çš„ stdout å’Œ stderr æ—¥å¿—æµ](https://kep.k8s.io/3288)
- [KEP-2837 å…è®¸åœ¨ Pod çº§åˆ«è®¾ç½®èµ„æºè¯·æ±‚å’Œé™åˆ¶](https://kep.k8s.io/2837)
- [KEP-4680 å°†èµ„æºè¿è¡ŒçŠ¶å†µçŠ¶æ€æ·»åŠ åˆ°è®¾å¤‡æ’ä»¶å’Œ DRA çš„ Pod çŠ¶æ€](https://kep.k8s.io/4680)
- [KEP-4800 å¼•å…¥æ–°çš„ CPU ç®¡ç†å™¨é™æ€ç­–ç•¥é€‰é¡¹ï¼Œè¯¥é€‰é¡¹å°½æœ€å¤§åŠªåŠ›é€šè¿‡ L3ï¼ˆæœ€åä¸€çº§ï¼‰ç¼“å­˜æ¥å¯¹é½ CPU èµ„æº](https://kep.k8s.io/4800)
- [KEP-4817 åœ¨ ResourceClaim.Status ä¸­æ·»åŠ é©±åŠ¨ç¨‹åºæ‹¥æœ‰çš„å­—æ®µä»¥åŠå¯èƒ½çš„æ ‡å‡†åŒ–ç½‘ç»œæ¥å£æ•°æ®](https://kep.k8s.io/4817)
- [KEP-4827 ä¸ºæ‰€æœ‰æ ¸å¿ƒç»„ä»¶å®ç° statusz ç«¯ç‚¹æ¥å…¬å¼€æœ‰å…³ç»„ä»¶åŸºæœ¬ä¿¡æ¯ã€è¿è¡ŒçŠ¶å†µå’Œå…³é”®æŒ‡æ ‡çš„æ ‡å‡†åŒ–å®æ—¶æ•°æ®](https://kep.k8s.io/4827)
- [KEP-4828 ä¸ºæ‰€æœ‰æ ¸å¿ƒç»„ä»¶å®ç° flagz ç«¯ç‚¹æ¥å…¬å¼€æœ‰å…³ç»„ä»¶çš„å‘½ä»¤è¡Œæ ‡å¿—çš„é…ç½®å‚æ•°](https://kep.k8s.io/4828)
- [KEP-2862 ä¸º Node èµ„æºæ–°å¢è‹¥å¹²å­èµ„æºç±»å‹ï¼Œä¸º kubelet æä¾›æ›´ç»†ç²’åº¦çš„ API æ¥å£é‰´æƒ](https://kep.k8s.io/2862)
- [KEP-4818 PreStop Hook çš„ç¡çœ æ“ä½œå…è®¸é›¶å€¼](https://kep.k8s.io/4818)
- [KEP-740  æä¾›æœåŠ¡å¸æˆ·ä»¤ç‰Œä¸å¤–éƒ¨ç­¾åè¿›è¡Œé›†æˆæ–¹æ³•, æ˜“äºæ›´æ–°ä»¤ç‰Œå’Œæä¾›å®‰å…¨æ€§](https://kep.k8s.io/740)
- [KEP-4885 ä½¿ç”¨ CPUManagerã€MemoryManager å’Œæ‹“æ‰‘ç®¡ç†å™¨æ·»åŠ å¯¹ Windows èŠ‚ç‚¹çš„ CPU å’Œå†…å­˜äº²å’Œæ€§æ”¯æŒ](https://kep.k8s.io/4885)
- [KEP-3926 å¼•å…¥ä¸€ä¸ªæ–°çš„ DeleteOptionï¼Œå³ä½¿æˆ‘ä»¬æ— æ³•æ£€ç´¢å…¶æ•°æ®ï¼Œä¹Ÿå¯ä»¥åˆ é™¤å¯¹åº”çš„èµ„æº](https://kep.k8s.io/3926)
- [KEP-4222 æ·»åŠ  CBOR æ•°æ®æ ¼å¼ä½œä¸º JSON çš„æœ‰æ•ˆæ›¿ä»£æ–¹æ¡ˆ](https://kep.k8s.io/4222)
- [KEP-4540 å¼•å…¥äº†æ–°çš„ CPUManager ç­–ç•¥é€‰é¡¹ strict-cpu-reservationï¼Œç¡®ä¿ reservedSystemCPUs ä¸¥æ ¼ä¿ç•™ç”¨äºç³»ç»Ÿå®ˆæŠ¤ç¨‹åºæˆ–ä¸­æ–­å¤„ç†ï¼Œå¹¶ä¸”ä¸ä¼šè¢« QoS ç±»ä¸º Burstable å’Œ BestEffort çš„ Pod ä½¿ç”¨](https://kep.k8s.io/4540)
- [KEP-4802  åˆæ­¥æ”¯æŒ Windows èŠ‚ç‚¹çš„ä½“é¢å…³é—­åŠŸèƒ½](https://kep.k8s.io/4802)

è¿™æ˜¯æœ‰å…³ Alpha çš„æ›´æ–°æ€»è§ˆï¼Œä¸‹æ–‡æ‹©å–äº†éƒ¨åˆ†ç‰¹æ€§è¯¦è¿°ã€‚å¦‚æœå¯¹å…¶ä»–ç‰¹æ€§æ„Ÿå…´è¶£ï¼Œè¯·ç§»æ­¥è‡³å…·ä½“çš„ KEP é¡µé¢äº†è§£è¿›å±•å’Œè¯¦æƒ…ã€‚

### KEP-3962 ä½¿ç”¨ CEL è¡¨è¾¾å¼å£°æ˜çš„æ›´æ”¹å‡†å…¥ç­–ç•¥

è¯¥åŠŸèƒ½åˆ©ç”¨äº† CEL çš„å¯¹è±¡å®ä¾‹åŒ–å’Œ JSON Patch ç­–ç•¥ï¼Œå¹¶ç»“åˆäº† Server Side Apply çš„åˆå¹¶ç®—æ³•ã€‚å®ƒç®€åŒ–äº†ç­–ç•¥å®šä¹‰ï¼Œå‡å°‘äº†å˜æ›´å†²çªï¼Œå¹¶æé«˜äº†å‡†å…¥æ§åˆ¶æ€§èƒ½ï¼ŒåŒæ—¶ä¸ºKubernetesä¸­æ›´å¼ºå¤§ã€å¯æ‰©å±•çš„ç­–ç•¥æ¡†æ¶å¥ å®šäº†åŸºç¡€ã€‚

Kubernetes ç°åœ¨æ”¯æŒåŸºäºé€šç”¨è¡¨è¾¾å¼è¯­è¨€ï¼ˆCELï¼‰çš„å˜æ›´å‡†å…¥ç­–ç•¥ï¼Œæä¾›äº†ä¸€ç§è½»é‡ã€é«˜æ•ˆçš„æ›¿ä»£å˜æ›´å‡†å…¥ Webhook çš„æ–¹æ³•ã€‚é€šè¿‡è¿™ä¸€å¢å¼ºåŠŸèƒ½ï¼Œç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨ CEL é€šè¿‡ç®€å•çš„å£°æ˜æ€§è¡¨è¾¾å¼æ¥å£°æ˜å˜æ›´ï¼Œä¾‹å¦‚è®¾ç½®æ ‡ç­¾ã€é»˜è®¤å­—æ®µæˆ–æ³¨å…¥è¾¹è½¦ã€‚

```yaml
apiVersion: admissionregistration.k8s.io/v1alpha1
kind: MutatingAdmissionPolicy
metadata:
  name: "sidecar-policy.example.com"
spec:
  paramKind:
    kind: Sidecar
    apiVersion: mutations.example.com/v1
  matchConstraints:
    resourceRules:
    - apiGroups:   [""]
      apiVersions: ["v1"]
      operations:  ["CREATE"]
      resources:   ["pods"]
  matchConditions:
    - name: does-not-already-have-sidecar
      expression: "!object.spec.initContainers.exists(ic, ic.name == \"mesh-proxy\")"
  failurePolicy: Fail
  reinvocationPolicy: IfNeeded
  mutations:
    - patchType: "JSONPatch"
      jsonPatch:
        expression: >
          [
            JSONPatch{
              op: "add", path: "/spec/initContainers/-",
              value: Object.spec.initContainers{
                name: "mesh-proxy",
                image: "mesh-proxy/v1.0.0",
                restartPolicy: "Always"
              }
            }
          ]
```

è¿™ç§æ–¹æ³•é™ä½äº†æ“ä½œå¤æ‚æ€§ï¼Œæ¶ˆé™¤äº†å¯¹ Webhook çš„éœ€æ±‚ï¼Œå¹¶ç›´æ¥ä¸ kube-apiserver é›†æˆï¼Œæä¾›äº†æ›´å¿«ã€æ›´å¯é çš„è¿›ç¨‹å†…å˜æ›´å¤„ç†èƒ½åŠ›ã€‚

### KEP-283 Pod çº§åˆ«è®¾ç½®èµ„æºè¯·æ±‚å’Œé™åˆ¶

æ­¤å¢å¼ºåŠŸèƒ½é€šè¿‡å¼•å…¥åœ¨Podçº§åˆ«è®¾ç½®èµ„æºè¯·æ±‚å’Œé™åˆ¶çš„èƒ½åŠ›ï¼Œç®€åŒ–äº†Kubernetesä¸­çš„èµ„æºç®¡ç†ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ‰€æœ‰ Pod ä¸­çš„å®¹å™¨éƒ½å¯ä»¥åŠ¨æ€ä½¿ç”¨çš„å…±äº«æ± ã€‚è¿™å¯¹äºå…·æœ‰æ³¢åŠ¨æˆ–çªå‘èµ„æºéœ€æ±‚çš„å·¥ä½œè´Ÿè½½ç‰¹åˆ«æœ‰ä»·å€¼ï¼Œå› ä¸ºå®ƒæœ€å°åŒ–äº†è¿‡åº¦é…ç½®å¹¶æé«˜äº†æ•´ä½“èµ„æºæ•ˆç‡ã€‚

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: pod-resources-demo
  namespace: pod-resources-example
spec:
  resources:
    limits:
      cpu: "1"
      memory: "200Mi"
    requests:
      cpu: "1"
      memory: "100Mi"
  containers:
  - name: pod-resources-demo-ctr-1
    image: nginx
    resources:
      limits:
        cpu: "0.5"
        memory: "100Mi"
      requests:
        cpu: "0.5"
        memory: "50Mi"
  - name: pod-resources-demo-ctr-2
    image: fedora
    command:
    - sleep
    - inf 
```

é€šè¿‡åœ¨Podçº§åˆ«åˆ©ç”¨ Linux cgroup è®¾ç½®ï¼ŒKubernetes ç¡®ä¿è¿™äº›èµ„æºé™åˆ¶å¾—åˆ°æ‰§è¡Œï¼ŒåŒæ—¶ä½¿ç´§å¯†è€¦åˆçš„å®¹å™¨èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°åä½œè€Œä¸ä¼šé‡åˆ°äººä¸ºé™åˆ¶ã€‚

* ä¼˜å…ˆçº§ï¼šå½“åŒæ—¶æŒ‡å®š Pod çº§å’Œå®¹å™¨çº§èµ„æºæ—¶ï¼ŒPod çº§èµ„æºä¼˜å…ˆã€‚
* QoSï¼šPod çº§èµ„æºåœ¨å½±å“ Pod çš„ QoS ç±»æ—¶ä¼˜å…ˆã€‚
* OOM åˆ†æ•°ï¼šOOM åˆ†æ•°è°ƒæ•´è®¡ç®—åŒæ—¶è€ƒè™‘ Pod çº§å’Œå®¹å™¨çº§èµ„æºã€‚
* å…¼å®¹æ€§ï¼šPod çº§èµ„æºæ—¨åœ¨ä¸ç°æœ‰åŠŸèƒ½å…¼å®¹ã€‚

è¿™æ ‡å¿—ç€å¤šå®¹å™¨ Pod çš„æ˜¾è‘—æ”¹è¿›ï¼Œå› ä¸ºå®ƒå‡å°‘äº†è·¨å®¹å™¨ç®¡ç†èµ„æºåˆ†é…çš„æ“ä½œå¤æ‚æ€§ã€‚å®ƒè¿˜ä¸ºç´§å¯†é›†æˆçš„åº”ç”¨ç¨‹åºï¼ˆå¦‚ sidecar æ¶æ„ï¼‰æä¾›äº†æ€§èƒ½æå‡ï¼Œåœ¨è¿™äº›åº”ç”¨ç¨‹åºä¸­ï¼Œå®¹å™¨å…±äº«å·¥ä½œè´Ÿè½½æˆ–ä¾èµ–å½¼æ­¤çš„å¯ç”¨æ€§ä»¥å®ç°æœ€ä½³æ€§èƒ½ã€‚


### æ›´å¤š DRA å¢å¼ºç‰¹æ€§ ğŸ”¥

DRA æ˜¯ Kubernetes èµ„æºç®¡ç†ç³»ç»Ÿçš„å…³é”®ç»„ä»¶ï¼Œè¿™äº›å¢å¼ºæ—¨åœ¨æé«˜å¯¹éœ€è¦ä¸“ç”¨ç¡¬ä»¶ï¼ˆå¦‚ GPUã€FPGA å’Œç½‘ç»œé€‚é…å™¨ï¼‰ çš„å·¥ä½œè´Ÿè½½è¿›è¡Œèµ„æºåˆ†é…çš„çµæ´»æ€§å’Œæ•ˆç‡ã€‚æ­¤æ¬¡å‘å¸ƒå¼•å…¥äº†å¤šé¡¹æ”¹è¿›ï¼ŒåŒ…æ‹¬åœ¨ Pod çŠ¶æ€ä¸­æ·»åŠ èµ„æºå¥åº·çŠ¶æ€ã€‚

ç›¸å…³ KEP åŒ…æ‹¬ï¼š

- [KEP-4680 å°†èµ„æºè¿è¡ŒçŠ¶å†µçŠ¶æ€æ·»åŠ åˆ°è®¾å¤‡æ’ä»¶å’Œ DRA çš„ Pod çŠ¶æ€](https://kep.k8s.io/4680)
- [KEP-4817 åœ¨ ResourceClaim.Status ä¸­æ·»åŠ é©±åŠ¨ç¨‹åºæ‹¥æœ‰çš„å­—æ®µä»¥åŠå¯èƒ½çš„æ ‡å‡†åŒ–ç½‘ç»œæ¥å£æ•°æ®](https://kep.k8s.io/4817)

## åˆ é™¤å’ŒåºŸå¼ƒåŠŸèƒ½

### æ’¤å› DRA çš„æ—§çš„å®ç°

å¢å¼ºç‰¹æ€§ KEP-3063 ("classic DRA") åœ¨ Kubernetes 1.26 ä¸­å¼•å…¥äº†åŠ¨æ€èµ„æºåˆ†é…ï¼ˆDRAï¼‰ã€‚ç„¶è€Œï¼Œåœ¨ Kubernetes v1.32 ä¸­ï¼Œè¿™ç§ DRA çš„å®ç°æ–¹æ³•å°†å‘ç”Ÿé‡å¤§å˜åŒ–ã€‚ä¸åŸæ¥å®ç°ç›¸å…³çš„ä»£ç å°†è¢«åˆ é™¤ï¼Œåªç•™ä¸‹ KEP-4381 ä½œä¸º"æ–°"çš„åŸºç¡€ç‰¹æ€§ã€‚æ”¹å˜ç°æœ‰æ–¹æ³•çš„å†³å®šæºäºå…¶ä¸é›†ç¾¤è‡ªåŠ¨ä¼¸ç¼©çš„ä¸å…¼å®¹æ€§ï¼Œå› ä¸ºèµ„æºå¯ç”¨æ€§æ˜¯ä¸é€æ˜çš„ï¼Œè¿™ä½¿å¾— Cluster Autoscaler å’Œæ§åˆ¶å™¨çš„å†³ç­–å˜å¾—å¤æ‚ã€‚

æ–°å¢çš„ç»“æ„åŒ–å‚æ•°æ¨¡å‹æ›¿æ¢äº†åŸæœ‰ç‰¹æ€§ã€‚è¿™æ¬¡ç§»é™¤å°†ä½¿ Kubernetes èƒ½å¤Ÿæ›´å¯é¢„æµ‹åœ°å¤„ç†æ–°çš„ç¡¬ä»¶éœ€æ±‚å’Œèµ„æºå£°æ˜ï¼Œé¿å…äº†ä¸ kube-apiserver ä¹‹é—´å¤æ‚çš„æ¥å› API è°ƒç”¨ã€‚

### gitRepo å·ç±»å‹å¼ƒç”¨è¯´æ˜

[gitRepo](https://kubernetes.io/docs/concepts/storage/volumes/#gitrepo) å·ç±»å‹è™½ç„¶å·²ç»è¢«æ ‡è®°ä¸ºå¼ƒç”¨, ä½†æ˜¯åœ¨ç°æœ‰ç‰ˆæœ¬ä¸­ä»ç„¶å¯ä»¥ä½¿ç”¨ã€‚è€ƒè™‘åˆ° `gitRepo` ç±»å‹çš„å·, å­˜åœ¨ä¸¥é‡çš„[å®‰å…¨æ¼æ´](https://nvd.nist.gov/vuln/detail/CVE-2024-10220), ç¤¾åŒºè®¡åˆ’å°†åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ç§»é™¤ç›¸å…³å®ç°ã€‚å› æ­¤, åœ¨ Kubernetes v1.32 çš„å‘å¸ƒä¸­, ç¤¾åŒºå†æ¬¡å‘ç”¨æˆ·å‘å‡ºè­¦å‘Š, å»ºè®®ç”¨æˆ·å°½å¿«è¿›è¡Œè¿ç§»ã€‚

### API ç§»é™¤

`flowcontrol.apiserver.k8s.io/v1beta3`  ç‰ˆæœ¬çš„ FlowSchema å’Œ PriorityLevelConfiguration å·²è¢«ç§»é™¤ã€‚ ä¸ºäº†å¯¹æ­¤åšå¥½å‡†å¤‡ï¼Œä½ å¯ä»¥ç¼–è¾‘ç°æœ‰çš„æ¸…å•æ–‡ä»¶å¹¶é‡å†™å®¢æˆ·ç«¯è½¯ä»¶ï¼Œä½¿ç”¨è‡ª v1.29 èµ·å¯ç”¨çš„ flowcontrol.apiserver.k8s.io/v1 API ç‰ˆæœ¬ã€‚ æ‰€æœ‰ç°æœ‰çš„æŒä¹…åŒ–å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡æ–° API è®¿é—®ã€‚flowcontrol.apiserver.k8s.io/v1beta3 ä¸­çš„é‡è¦å˜åŒ–åŒ…æ‹¬ï¼š å½“æœªæŒ‡å®šæ—¶ï¼ŒPriorityLevelConfiguration çš„ spec.limited.nominalConcurrencyShares å­—æ®µä»…é»˜è®¤ä¸º 30ï¼Œè€Œæ˜¾å¼è®¾ç½®çš„ 0 å€¼ä¸ä¼šè¢«æ›´æ”¹ä¸ºæ­¤é»˜è®¤å€¼ã€‚

## DaoCloud ç¤¾åŒºè´¡çŒ®

2024 å¹´ 11 æœˆ 12 è‡³ 15 æ—¥æœŸé—´, [KubeCon + CloudNativeCon North America 2024](https://events.linuxfoundation.org/kubecon-cloudnativecon-north-america/) å¦‚çº¦ä¸¾åŠ, ä»¥ä¸‹æ˜¯æœ¬å¹´åº¦æˆ‘ä»¬è·å¾—çš„ä¸€äº›è£èª‰ï¼š

- CNCF å¤§ä½¿ - è”¡å¨ (å†æ¬¡å½“é€‰)ã€è¦æµ·å³°
- CNCF æ–‡æ¡£å¥– - è¦æµ·å³°
- Kubernetes Contributor Awards (SIG Storage å’Œ SIG Cluster Lifecyle) - èŒƒå®å‘

æˆé•¿æ•…äº‹åˆ†äº«ï¼š[ä»ç¤¾åŒºå°ç™½åˆ° CNCF å¤§ä½¿](https://mp.weixin.qq.com/s/tdO2QhvE800TKy5RY7FCWw)

## å‘è¡Œè¯´æ˜

ä¸Šè¿°å†…å®¹å°±æ˜¯ Kubernetes v1.32 çš„ä¸»è¦æ›´æ–°å’Œå†…å®¹å•¦ï¼Œæ›´å¤šçš„å‘å¸ƒè¯´æ˜å¯ä»¥æŸ¥çœ‹ Kubernetes v1.32 ç‰ˆæœ¬çš„å®Œæ•´è¯¦ç»†ä¿¡æ¯ï¼š`https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.32.md`ã€‚

æˆ‘ä»¬ä¸‹æ¬¡ç‰ˆæœ¬å‘å¸ƒæ—¶å†è§ï¼

## å†å²æ–‡æ¡£

- [Kubernetes 1.31 å‘å¸ƒï¼åå¹´ OCI é•œåƒå€Ÿç€ AI çš„é£ç»ˆäºåŠ å…¥ Volume çš„å¤§å®¶åº­ ~](https://mp.weixin.qq.com/s/bl5ozc90PhWMO3l-deiJbw)
- [æœ€å¯çˆ±çš„ç‰ˆæœ¬ UwU - Kubernetes v1.30 å‘å¸ƒï¼](https://mp.weixin.qq.com/s?__biz=MzA5NTUxNzE4MQ==&mid=2659286459&idx=1&sn=bcb8d232b7b611caf89b7dbf17ce0299&chksm=8bcbfd29bcbc743f88806920a1f5200450deac6575db3d20371f76c54d33140d5f4ce39f19f7)
- [Kubernetes 1.29 å…¨æ–°ç‰¹æ€§ï¼š æŠ›å¼ƒ iptables è¿˜åœ¨ç­‰ä»€ä¹ˆ...](https://mp.weixin.qq.com/s/ZZJBRWauVo-VwNFHkNQ_2w)
- [Kubernetes 1.28 éœ‡æ’¼å‘å¸ƒï¼ŒSidecar Containers è¿é¢è€Œæ¥](https://mp.weixin.qq.com/s/Dr_JpSD9tzfahslZO2bX5A)
- [è¿‘ä¸¤å¹´åŠŸèƒ½å¢åŠ æœ€å¤šï¼Kubernetes 1.27 æ­£å¼å‘å¸ƒ](https://mp.weixin.qq.com/s/maDEiCGzOPSDkH9dUxIxdA)
- [Kubernetes æ­£å¼å‘å¸ƒ v1.26ï¼Œç¨³å®šæ€§æ˜¾è‘—æå‡](https://mp.weixin.qq.com/s/qwzmeIM4INz-_BK_gbwOxw)
- [Kubernetes 1.25 æ­£å¼å‘å¸ƒï¼Œå¤šæ–¹é¢é‡å¤§çªç ´](https://mp.weixin.qq.com/s/aRmLBYpk0MhLJAwY85DyuA)
- [Kubernetes 1.24 èµ°å‘æˆç†Ÿçš„ Kubernetes](https://mp.weixin.qq.com/s/vqH8ueaZeEeZbx_axNVSjg)
- [Kubernetes 1.23 æ­£å¼å‘å¸ƒï¼Œæœ‰å“ªäº›å¢å¼ºï¼Ÿ](https://mp.weixin.qq.com/s/A5GBv5Yn6tQK_r6_FSyp9A)
- [Kubernetes 1.22 é¢ è¦†ä½ çš„æƒ³è±¡ï¼šå¯å¯ç”¨ Swapï¼Œæ¨å‡º PSP æ›¿æ¢æ–¹æ¡ˆï¼Œè¿˜æœ‰â€¦â€¦](https://mp.weixin.qq.com/s/9nH2UagDm6TkGhEyoYPgpQ)
- [Kubernetes 1.21 éœ‡æ’¼å‘å¸ƒ | PSP å°†è¢«åºŸé™¤ï¼ŒBareMetal å¾—åˆ°å¢å¼º](https://mp.weixin.qq.com/s/amGjvytJatO-5a7Nz4BYPw)

## å‚è€ƒ

1. Kubernetes å¢å¼ºç‰¹æ€§ <https://kep.k8s.io/>
2. Kubernetes 1.32 å‘å¸ƒå›¢é˜Ÿ <https://github.com/kubernetes/sig-release/blob/master/releases/release-1.32>
3. Kubernetes 1.32 å˜æ›´æ—¥å¿— <https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.32.md>
4. Kubernetes 1.32 ä¸»é¢˜è®¨è®º <https://github.com/kubernetes/sig-release/discussions/2639>
